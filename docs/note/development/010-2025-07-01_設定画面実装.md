# Task 10: è¨­å®šç”»é¢å®Ÿè£… - é–‹ç™ºè¨˜éŒ²

**å®Ÿè£…æ—¥**: 2025å¹´7æœˆ1æ—¥  
**ã‚¿ã‚¹ã‚¯**: Task 10: è¨­å®šç”»é¢å®Ÿè£… - G004ä¸€èˆ¬è¨­å®šã¨ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ†ãƒ¼ãƒé©ç”¨  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… å®Œäº†

---

## ğŸ¯ ã‚¿ã‚¹ã‚¯æ¦‚è¦

WabiMailã®è¨­å®šç”»é¢ï¼ˆG004ï¼‰ã‚’å®Ÿè£…ã—ã¾ã—ãŸã€‚ä¾˜ã³å¯‚ã³ã®ç¾å­¦ã«åŸºã¥ã„ãŸé™ã‹ã§ç¾ã—ã„è¨­å®šã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æä¾›ã—ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å„ç¨®è¨­å®šã‚’çµ±åˆçš„ã«ç®¡ç†ã§ãã‚‹åŒ…æ‹¬çš„ãªè¨­å®šã‚·ã‚¹ãƒ†ãƒ ã‚’å®Ÿç¾ã—ã¾ã—ãŸã€‚

---

## ğŸ“¦ å®Ÿè£…ã—ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

### 1. **SettingsWindow** - çµ±åˆè¨­å®šç”»é¢
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/ui/settings_window.py` (1400+ lines)
- **æ©Ÿèƒ½**:
  - ä¾˜ã³å¯‚ã³ãƒ‡ã‚¶ã‚¤ãƒ³ã®çµ±åˆè¨­å®šç”»é¢
  - 6ã¤ã®ã‚¿ãƒ–ã«ã‚ˆã‚‹æ©Ÿèƒ½åˆ†é¡
  - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¨­å®šåæ˜ 
  - è¨­å®šã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
  - è¨­å®šå€¤ã®æ¤œè¨¼ãƒ»é©ç”¨
  - ä¾˜ã³å¯‚ã³ãƒ†ãƒ¼ãƒã®è©³ç´°ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### 2. **MainWindowçµ±åˆ** - ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªè¨­å®šç”»é¢çµ±åˆ
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/ui/main_window.py` (æ›´æ–°)
- **æ”¹å–„ç‚¹**:
  - è¨­å®šãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®è¿½åŠ 
  - è¨­å®šå¤‰æ›´æ™‚ã®UIã‚¹ã‚¿ã‚¤ãƒ«å†é©ç”¨
  - ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®šç”»é¢ã¨ã®é€£æº
  - è¨­å®šå¤‰æ›´ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®å®Ÿè£…

### 3. **AppConfigæ‹¡å¼µ** - è¨­å®šç®¡ç†ã®å¼·åŒ–
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/config/app_config.py` (ç¢ºèªãƒ»æ´»ç”¨)
- **é€£æºæ©Ÿèƒ½**:
  - ãƒ‰ãƒƒãƒˆè¨˜æ³•ã«ã‚ˆã‚‹è¨­å®šå€¤ã‚¢ã‚¯ã‚»ã‚¹
  - YAMLå½¢å¼ã§ã®è¨­å®šä¿å­˜
  - è¨­å®šå€¤ã®å‹å®‰å…¨æ€§
  - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã®ç®¡ç†

---

## ğŸ¨ ä¾˜ã³å¯‚ã³ãƒ‡ã‚¶ã‚¤ãƒ³å®Ÿè£…

### UIç¾å­¦ã®ä½“ç¾
```python
# ä¾˜ã³å¯‚ã³ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ
self.wabi_colors = {
    "bg": "#fefefe",           # ç´”ç™½ã®èƒŒæ™¯
    "fg": "#333333",           # å¢¨ã®ã‚ˆã†ãªæ–‡å­—è‰²
    "entry_bg": "#fcfcfc",     # å…¥åŠ›æ¬„ã®èƒŒæ™¯
    "border": "#e0e0e0",       # ç¹Šç´°ãªå¢ƒç•Œç·š
    "accent": "#8b7355",       # ä¾˜ã³å¯‚ã³ã‚¢ã‚¯ã‚»ãƒ³ãƒˆè‰²
    "button_bg": "#f8f8f8",    # ãƒœã‚¿ãƒ³èƒŒæ™¯
    "focus": "#d4c4b0",        # ãƒ•ã‚©ãƒ¼ã‚«ã‚¹è‰²
    "disabled": "#999999",     # ç„¡åŠ¹çŠ¶æ…‹
    "success": "#4a7c59",      # æˆåŠŸè‰²
    "warning": "#b8860b",      # è­¦å‘Šè‰²
    "error": "#cd5c5c"         # ã‚¨ãƒ©ãƒ¼è‰²
}

# å’Œã®ç¾æ„è­˜ã«åŸºã¥ããƒ•ã‚©ãƒ³ãƒˆè¨­å®š
self.wabi_fonts = {
    "header": ("Yu Gothic UI", 12, "normal"),
    "body": ("Yu Gothic UI", 11, "normal"),
    "small": ("Yu Gothic UI", 9, "normal"),
    "title": ("Yu Gothic UI", 14, "normal")
}
```

### é™ã‹ã§é›†ä¸­ã§ãã‚‹ç’°å¢ƒ
- **ã‚¿ãƒ–ãƒ™ãƒ¼ã‚¹ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³**: 6ã¤ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼ã«ã‚ˆã‚‹æ•´ç†
- **ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯¾å¿œ**: å¤§é‡ã®è¨­å®šé …ç›®ã§ã‚‚å¿«é©ãªæ“ä½œ
- **é©åˆ‡ãªä½™ç™½**: æƒ…å ±ã®æ•´ç†ã¨è¦–è¦šçš„ãªä¼‘æ¯
- **æ§ãˆã‚ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯**: é‚ªé­”ã«ãªã‚‰ãªã„çŠ¶æ…‹è¡¨ç¤º

---

## ğŸ”§ æŠ€è¡“å®Ÿè£…è©³ç´°

### è¨­å®šç”»é¢ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```python
class SettingsWindow:
    """è¨­å®šç”»é¢ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚¯ãƒ©ã‚¹"""
    
    def __init__(self, parent, config: AppConfig, 
                 on_settings_changed: Optional[Callable] = None):
        """
        è¨­å®šã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’åˆæœŸåŒ–
        
        Args:
            parent: è¦ªã‚¦ã‚£ãƒ³ãƒ‰ã‚¦
            config: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
            on_settings_changed: è¨­å®šå¤‰æ›´æ™‚ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
        """
        self.parent = parent
        self.config = config
        self.on_settings_changed = on_settings_changed
        
        # ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦çŠ¶æ…‹
        self.window = None
        self.notebook = None
        self.settings_vars = {}
        self.changes_made = False
        
        # UIæ§‹ç¯‰
        self._create_window()
```

### 6ã¤ã®è¨­å®šã‚¿ãƒ–å®Ÿè£…

#### 1. ä¸€èˆ¬è¨­å®šã‚¿ãƒ–
```python
def _create_general_tab(self):
    """ä¸€èˆ¬è¨­å®šã‚¿ãƒ–ã‚’ä½œæˆ"""
    tab_frame = ttk.Frame(self.notebook, style="Wabi.TFrame")
    self.notebook.add(tab_frame, text="âš™ï¸ ä¸€èˆ¬")
    
    # è¨€èªè¨­å®š
    language_var = tk.StringVar()
    self.settings_vars["app.language"] = language_var
    language_var.set(self.config.get("app.language", "ja"))
    
    language_combo = ttk.Combobox(
        lang_frame,
        textvariable=language_var,
        values=["ja", "en", "zh", "ko"],
        state="readonly",
        style="Wabi.TCombobox"
    )
    
    # ãƒ†ãƒ¼ãƒè¨­å®š
    theme_var = tk.StringVar()
    self.settings_vars["app.theme"] = theme_var
    theme_var.set(self.config.get("app.theme", "wabi_sabi_light"))
    
    theme_combo = ttk.Combobox(
        theme_frame,
        textvariable=theme_var,
        values=["wabi_sabi_light", "wabi_sabi_dark", "minimal"],
        state="readonly",
        style="Wabi.TCombobox"
    )
```

#### 2. å¤–è¦³è¨­å®šã‚¿ãƒ–
```python
def _create_appearance_tab(self):
    """å¤–è¦³è¨­å®šã‚¿ãƒ–ã‚’ä½œæˆ"""
    # ãƒ•ã‚©ãƒ³ãƒˆè¨­å®š
    font_family_var = tk.StringVar()
    self.settings_vars["ui.font.family"] = font_family_var
    font_family_var.set(self.config.get("ui.font.family", "Meiryo"))
    
    font_size_var = tk.IntVar()
    self.settings_vars["ui.font.size"] = font_size_var
    font_size_var.set(self.config.get("ui.font.size", 10))
    
    # ã‚«ãƒ©ãƒ¼è¨­å®š
    bg_color_var = tk.StringVar()
    self.settings_vars["ui.colors.background"] = bg_color_var
    bg_color_var.set(self.config.get("ui.colors.background", "#FEFEFE"))
    
    # ã‚«ãƒ©ãƒ¼ãƒ”ãƒƒã‚«ãƒ¼æ©Ÿèƒ½
    def choose_background_color():
        color = colorchooser.askcolor(
            color=bg_color_var.get(),
            title="èƒŒæ™¯è‰²ã‚’é¸æŠ"
        )[1]
        if color:
            bg_color_var.set(color)
            self._on_setting_changed()
```

#### 3. ãƒ¡ãƒ¼ãƒ«è¨­å®šã‚¿ãƒ–
```python
def _create_mail_tab(self):
    """ãƒ¡ãƒ¼ãƒ«è¨­å®šã‚¿ãƒ–ã‚’ä½œæˆ"""
    # ãƒ¡ãƒ¼ãƒ«ãƒã‚§ãƒƒã‚¯é–“éš”
    check_interval_var = tk.IntVar()
    self.settings_vars["mail.check_interval"] = check_interval_var
    check_interval_var.set(self.config.get("mail.check_interval", 300))
    
    interval_scale = ttk.Scale(
        interval_frame,
        from_=60,
        to=3600,
        variable=check_interval_var,
        orient=tk.HORIZONTAL,
        style="Wabi.TScale",
        command=lambda val: self._update_interval_label(val)
    )
    
    # é€šçŸ¥è¨­å®š
    notifications_var = tk.BooleanVar()
    self.settings_vars["mail.notifications.enabled"] = notifications_var
    notifications_var.set(self.config.get("mail.notifications.enabled", True))
    
    # è‡ªå‹•ãƒã‚§ãƒƒã‚¯è¨­å®š
    auto_check_var = tk.BooleanVar()
    self.settings_vars["mail.auto_check"] = auto_check_var
    auto_check_var.set(self.config.get("mail.auto_check", True))
```

#### 4. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã‚¿ãƒ–
```python
def _create_security_tab(self):
    """ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã‚¿ãƒ–ã‚’ä½œæˆ"""
    # æš—å·åŒ–è¨­å®š
    encryption_var = tk.BooleanVar()
    self.settings_vars["security.encryption_enabled"] = encryption_var
    encryption_var.set(self.config.get("security.encryption_enabled", True))
    
    # è‡ªå‹•ãƒ­ãƒƒã‚¯è¨­å®š
    auto_lock_var = tk.BooleanVar()
    self.settings_vars["security.auto_lock"] = auto_lock_var
    auto_lock_var.set(self.config.get("security.auto_lock", False))
    
    # ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¨˜æ†¶è¨­å®š
    remember_password_var = tk.BooleanVar()
    self.settings_vars["security.remember_passwords"] = remember_password_var
    remember_password_var.set(self.config.get("security.remember_passwords", True))
```

#### 5. ä¾˜ã³å¯‚ã³è¨­å®šã‚¿ãƒ–
```python
def _create_wabi_sabi_tab(self):
    """ä¾˜ã³å¯‚ã³è¨­å®šã‚¿ãƒ–ã‚’ä½œæˆ"""
    # ç¾å­¦ã®å“²å­¦èª¬æ˜
    philosophy_text = """ä¾˜ã³å¯‚ã³ï¼ˆã‚ã³ã•ã³ï¼‰ã¯ã€æ—¥æœ¬å¤æ¥ã®ç¾æ„è­˜ã§ã™ã€‚
ä¸å®Œå…¨ã•ã‚„ç„¡å¸¸ã•ã®ä¸­ã«ç¾ã‚’è¦‹å‡ºã—ã€ã‚·ãƒ³ãƒ—ãƒ«ã§é™ã‹ãªç¾ã—ã•ã‚’è¿½æ±‚ã—ã¾ã™ã€‚

â€¢ ä¾˜ï¼ˆã‚ã³ï¼‰- ç°¡ç´ ã§é™ã‹ãªè¶£
â€¢ å¯‚ï¼ˆã•ã³ï¼‰- å¤ã³æœ½ã¡ãŸè¶£ã€æ™‚é–“ã®çµŒéç¾

WabiMailã§ã¯ã€ã“ã®ç¾å­¦ã‚’ãƒ‡ã‚¸ã‚¿ãƒ«ä½“é¨“ã«å–ã‚Šå…¥ã‚Œã¦ã„ã¾ã™ã€‚"""
    
    # ä¾˜ã³å¯‚ã³å…·ä½“è¨­å®š
    simplicity_var = tk.IntVar()
    self.settings_vars["wabi_sabi.simplicity"] = simplicity_var
    simplicity_var.set(self.config.get("wabi_sabi.simplicity", 80))
    
    tranquility_var = tk.IntVar()
    self.settings_vars["wabi_sabi.tranquility"] = tranquility_var
    tranquility_var.set(self.config.get("wabi_sabi.tranquility", 70))
    
    impermanence_var = tk.IntVar()
    self.settings_vars["wabi_sabi.impermanence"] = impermanence_var
    impermanence_var.set(self.config.get("wabi_sabi.impermanence", 60))
```

#### 6. è©³ç´°è¨­å®šã‚¿ãƒ–
```python
def _create_advanced_tab(self):
    """è©³ç´°è¨­å®šã‚¿ãƒ–ã‚’ä½œæˆ"""
    # ãƒ­ã‚°è¨­å®š
    log_level_var = tk.StringVar()
    self.settings_vars["logging.level"] = log_level_var
    log_level_var.set(self.config.get("logging.level", "INFO"))
    
    # è¨­å®šã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ»ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
    export_button = ttk.Button(
        config_frame,
        text="è¨­å®šã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ",
        style="Action.Wabi.TButton",
        command=self._export_settings
    )
    
    import_button = ttk.Button(
        config_frame,
        text="è¨­å®šã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ",
        style="Action.Wabi.TButton",
        command=self._import_settings
    )
    
    # é–‹ç™ºè€…è¨­å®š
    debug_mode_var = tk.BooleanVar()
    self.settings_vars["debug.enabled"] = debug_mode_var
```

### è¨­å®šç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 

```python
def _apply_settings(self):
    """è¨­å®šã‚’é©ç”¨"""
    try:
        changed_settings = {}
        
        for key, var in self.settings_vars.items():
            current_value = self.config.get(key)
            new_value = var.get()
            
            if current_value != new_value:
                self.config.set(key, new_value)
                changed_settings[key] = new_value
        
        if changed_settings:
            # è¨­å®šã‚’ä¿å­˜
            self.config.save_config()
            
            # ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’å®Ÿè¡Œ
            if self.on_settings_changed:
                self.on_settings_changed(changed_settings)
            
            self._update_status("âœ… è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸ")
            logger.info(f"è¨­å®šã‚’é©ç”¨ã—ã¾ã—ãŸ: {list(changed_settings.keys())}")
            
            # å¤‰æ›´ãƒ•ãƒ©ã‚°ã‚’ãƒªã‚»ãƒƒãƒˆ
            self.changes_made = False
            
            messagebox.showinfo(
                "è¨­å®šä¿å­˜å®Œäº†",
                f"è¨­å®šãŒæ­£å¸¸ã«ä¿å­˜ã•ã‚Œã¾ã—ãŸã€‚\n\n"
                f"å¤‰æ›´ã•ã‚ŒãŸé …ç›®: {len(changed_settings)}å€‹",
                parent=self.window
            )
        else:
            self._update_status("å¤‰æ›´ã™ã‚‹è¨­å®šãŒã‚ã‚Šã¾ã›ã‚“")
            messagebox.showinfo(
                "è¨­å®šç¢ºèª",
                "å¤‰æ›´ã™ã‚‹è¨­å®šãŒã‚ã‚Šã¾ã›ã‚“ã€‚",
                parent=self.window
            )
            
    except Exception as e:
        logger.error(f"è¨­å®šé©ç”¨ã‚¨ãƒ©ãƒ¼: {e}")
        messagebox.showerror(
            "è¨­å®šã‚¨ãƒ©ãƒ¼",
            f"è¨­å®šã®é©ç”¨ã«å¤±æ•—ã—ã¾ã—ãŸ:\n{e}",
            parent=self.window
        )
```

### ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½

```python
def _export_settings(self):
    """è¨­å®šã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ"""
    try:
        file_path = filedialog.asksaveasfilename(
            title="è¨­å®šã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ",
            defaultextension=".json",
            filetypes=[
                ("JSONè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«", "*.json"),
                ("ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«", "*.*")
            ],
            parent=self.window
        )
        
        if file_path:
            settings_data = {
                "wabimail_version": "1.0.0",
                "export_date": datetime.now().isoformat(),
                "settings": self.config.get_all()
            }
            
            with open(file_path, 'w', encoding='utf-8') as f:
                json.dump(settings_data, f, ensure_ascii=False, indent=2)
            
            self._update_status(f"ğŸ“¤ è¨­å®šã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ: {Path(file_path).name}")
            messagebox.showinfo(
                "ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå®Œäº†",
                f"è¨­å®šã‚’æ­£å¸¸ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ:\n{file_path}",
                parent=self.window
            )
            
    except Exception as e:
        logger.error(f"è¨­å®šã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼: {e}")
        messagebox.showerror("ã‚¨ãƒ©ãƒ¼", f"è¨­å®šã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸ:\n{e}")

def _import_settings(self):
    """è¨­å®šã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ"""
    try:
        file_path = filedialog.askopenfilename(
            title="è¨­å®šã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ",
            filetypes=[
                ("JSONè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«", "*.json"),
                ("ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«", "*.*")
            ],
            parent=self.window
        )
        
        if file_path:
            with open(file_path, 'r', encoding='utf-8') as f:
                import_data = json.load(f)
            
            # è¨­å®šãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼
            if "settings" not in import_data:
                raise ValueError("ç„¡åŠ¹ãªè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã§ã™")
            
            settings = import_data["settings"]
            
            # ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
            result = messagebox.askyesno(
                "è¨­å®šã‚¤ãƒ³ãƒãƒ¼ãƒˆç¢ºèª",
                f"è¨­å®šã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã‹ï¼Ÿ\n\n"
                f"ç¾åœ¨ã®è¨­å®šã¯ä¸Šæ›¸ãã•ã‚Œã¾ã™ã€‚\n"
                f"ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ—¥æ™‚: {import_data.get('export_date', 'ä¸æ˜')}",
                parent=self.window
            )
            
            if result:
                # è¨­å®šã‚’é©ç”¨
                for key, value in settings.items():
                    self.config.set(key, value)
                
                self.config.save_config()
                self._populate_settings_from_config()
                
                self._update_status(f"ğŸ“¥ è¨­å®šã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ: {Path(file_path).name}")
                messagebox.showinfo(
                    "ã‚¤ãƒ³ãƒãƒ¼ãƒˆå®Œäº†",
                    "è¨­å®šã‚’æ­£å¸¸ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã—ãŸã€‚",
                    parent=self.window
                )
                
    except Exception as e:
        logger.error(f"è¨­å®šã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼: {e}")
        messagebox.showerror("ã‚¨ãƒ©ãƒ¼", f"è¨­å®šã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸ:\n{e}")
```

---

## ğŸŒ¸ MainWindowçµ±åˆå®Ÿè£…

### è¨­å®šãƒ¡ãƒ‹ãƒ¥ãƒ¼è¿½åŠ 
```python
# è¨­å®šãƒ¡ãƒ‹ãƒ¥ãƒ¼
settings_menu = tk.Menu(menubar, tearoff=0)
menubar.add_cascade(label="è¨­å®š", menu=settings_menu)
settings_menu.add_command(label="ğŸ› ï¸ è¨­å®šç”»é¢", command=self._show_settings)
settings_menu.add_separator()
settings_menu.add_command(label="âš™ï¸ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®š", command=self._show_account_settings)
```

### è¨­å®šç”»é¢è¡¨ç¤ºæ©Ÿèƒ½
```python
def _show_settings(self):
    """è¨­å®šç”»é¢ã‚’è¡¨ç¤º"""
    try:
        from src.ui.settings_window import show_settings_window
        
        def on_settings_changed(changed_settings):
            """è¨­å®šå¤‰æ›´æ™‚ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯"""
            logger.info("è¨­å®šãŒå¤‰æ›´ã•ã‚Œã¾ã—ãŸ")
            self._update_status("âš™ï¸ è¨­å®šãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸ")
            
            # UIé–¢é€£ã®è¨­å®šãŒå¤‰æ›´ã•ã‚ŒãŸå ´åˆã¯ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å†é©ç”¨
            if any(key.startswith(('ui.', 'app.theme')) for key in changed_settings.keys()):
                self._setup_wabi_sabi_style()
                logger.info("UIã‚¹ã‚¿ã‚¤ãƒ«ã‚’å†é©ç”¨ã—ã¾ã—ãŸ")
        
        settings_window = show_settings_window(
            parent=self.root,
            config=self.config,
            on_settings_changed=on_settings_changed
        )
        
        if settings_window:
            self._update_status("ğŸ› ï¸ è¨­å®šç”»é¢ã‚’é–‹ãã¾ã—ãŸ")
            logger.info("è¨­å®šç”»é¢ã‚’è¡¨ç¤ºã—ã¾ã—ãŸ")
        
    except Exception as e:
        logger.error(f"è¨­å®šç”»é¢è¡¨ç¤ºã‚¨ãƒ©ãƒ¼: {e}")
        messagebox.showerror("ã‚¨ãƒ©ãƒ¼", f"è¨­å®šç”»é¢ã®è¡¨ç¤ºã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:\n{e}")
```

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè£…

### åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ
**ãƒ•ã‚¡ã‚¤ãƒ«**: `tests/test_settings_window.py` (7ãƒ†ã‚¹ãƒˆ)

```python
class TestSettingsWindow(unittest.TestCase):
    """è¨­å®šã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹"""
    
    def test_app_config_initialization(self):
        """AppConfigåˆæœŸåŒ–ãƒ†ã‚¹ãƒˆ"""
        # åŸºæœ¬è¨­å®šå€¤ã®ç¢ºèª
        
    def test_config_set_get(self):
        """è¨­å®šå€¤ã®è¨­å®šãƒ»å–å¾—ãƒ†ã‚¹ãƒˆ"""
        # è¨­å®šå€¤ã®èª­ã¿æ›¸ãç¢ºèª
        
    def test_config_save_load(self):
        """è¨­å®šã®ä¿å­˜ãƒ»èª­ã¿è¾¼ã¿ãƒ†ã‚¹ãƒˆ"""
        # æ°¸ç¶šåŒ–æ©Ÿèƒ½ã®ç¢ºèª
        
    def test_settings_validation(self):
        """è¨­å®šå€¤æ¤œè¨¼ãƒ†ã‚¹ãƒˆ"""
        # å…¥åŠ›å€¤ã®æ¤œè¨¼ãƒ«ãƒ¼ãƒ«ç¢ºèª
        
    def test_theme_settings(self):
        """ãƒ†ãƒ¼ãƒè¨­å®šãƒ†ã‚¹ãƒˆ"""
        # ä¾˜ã³å¯‚ã³ãƒ†ãƒ¼ãƒã®é©ç”¨ç¢ºèª
```

### æ©Ÿèƒ½åˆ¥ãƒ†ã‚¹ãƒˆ
**ãƒ•ã‚¡ã‚¤ãƒ«**: `test_settings_functionality.py`

```bash
ğŸŒ¸ WabiMail è¨­å®šç”»é¢æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
==================================================
âœ… AppConfigæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
âœ… SettingsWindowã‚³ã‚¢æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ  
âœ… è¨­å®šå€¤æ¤œè¨¼ãƒ†ã‚¹ãƒˆ
âœ… ãƒ†ãƒ¼ãƒæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
âœ… è¨­å®šã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ

ğŸ“Š ãƒ†ã‚¹ãƒˆçµæœ: 5/5 ãƒ†ã‚¹ãƒˆæˆåŠŸ
ğŸ‰ å…¨ã¦ã®ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã—ã¾ã—ãŸï¼
```

### ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
**ãƒ•ã‚¡ã‚¤ãƒ«**: `demo_settings_window.py`

```python
class SettingsWindowDemo:
    """è¨­å®šç”»é¢ãƒ‡ãƒ¢ã‚¯ãƒ©ã‚¹"""
    
    def _demo_open_settings(self):
        """è¨­å®šç”»é¢ã‚’é–‹ããƒ‡ãƒ¢"""
        
    def _demo_apply_sample_settings(self):
        """ã‚µãƒ³ãƒ—ãƒ«è¨­å®šã‚’é©ç”¨ãƒ‡ãƒ¢"""
        
    def _demo_reset_settings(self):
        """è¨­å®šãƒªã‚»ãƒƒãƒˆãƒ‡ãƒ¢"""
```

---

## ğŸ“ˆ å®Ÿè£…æˆæœ

### æ©Ÿèƒ½çš„æˆæœ
- âœ… **çµ±åˆè¨­å®šç®¡ç†**: 6ã¤ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼ã«ã‚ˆã‚‹åŒ…æ‹¬çš„è¨­å®š
- âœ… **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åæ˜ **: è¨­å®šå¤‰æ›´ã®å³åº§é©ç”¨
- âœ… **ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ**: è¨­å®šã®ç§»è¡Œãƒ»ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
- âœ… **æ¤œè¨¼ã‚·ã‚¹ãƒ†ãƒ **: å…¥åŠ›å€¤ã®é©åˆ‡æ€§ãƒã‚§ãƒƒã‚¯

### æŠ€è¡“çš„æˆæœ
- âœ… **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­è¨ˆ**: è¨­å®šç”»é¢ã®ç‹¬ç«‹æ€§ã¨å†åˆ©ç”¨æ€§
- âœ… **ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é€£æº**: ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã¨ã®é©åˆ‡ãªçµ±åˆ
- âœ… **å‹å®‰å…¨æ€§**: è¨­å®šå€¤ã®å‹ç®¡ç†
- âœ… **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: åŒ…æ‹¬çš„ãªã‚¨ãƒ©ãƒ¼å¯¾å¿œ

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“
- âœ… **ä¾˜ã³å¯‚ã³ä½“é¨“**: é™ã‹ã§ç¾ã—ã„è¨­å®šç’°å¢ƒ
- âœ… **ç›´æ„Ÿçš„æ“ä½œ**: ã‚¿ãƒ–ã«ã‚ˆã‚‹è«–ç†çš„åˆ†é¡
- âœ… **è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯**: å¤‰æ›´çŠ¶æ…‹ã®æ˜ç¢ºè¡¨ç¤º
- âœ… **å®‰å…¨æ€§**: è¨­å®šå¤‰æ›´ã®ç¢ºèªãƒ»å–ã‚Šæ¶ˆã—æ©Ÿèƒ½

---

## ğŸ”„ è¨­å®šç”»é¢ã®6ã¤ã®ã‚¿ãƒ–

### 1. âš™ï¸ ä¸€èˆ¬è¨­å®š
- è¨€èªé¸æŠï¼ˆæ—¥æœ¬èªã€è‹±èªã€ä¸­å›½èªã€éŸ“å›½èªï¼‰
- ãƒ†ãƒ¼ãƒé¸æŠï¼ˆãƒ©ã‚¤ãƒˆã€ãƒ€ãƒ¼ã‚¯ã€ãƒŸãƒ‹ãƒãƒ«ï¼‰
- ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—è¨­å®š

### 2. ğŸ¨ å¤–è¦³è¨­å®š
- ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šï¼ˆãƒ•ã‚¡ãƒŸãƒªãƒ¼ã€ã‚µã‚¤ã‚ºï¼‰
- ã‚«ãƒ©ãƒ¼è¨­å®šï¼ˆèƒŒæ™¯ã€æ–‡å­—ã€ã‚¢ã‚¯ã‚»ãƒ³ãƒˆï¼‰
- ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨­å®šï¼ˆãƒšã‚¤ãƒ³å¹…ã€é–“éš”ï¼‰

### 3. ğŸ“§ ãƒ¡ãƒ¼ãƒ«è¨­å®š
- ãƒ¡ãƒ¼ãƒ«ãƒã‚§ãƒƒã‚¯é–“éš”ï¼ˆ1åˆ†ã€œ1æ™‚é–“ï¼‰
- è‡ªå‹•ãƒã‚§ãƒƒã‚¯æœ‰åŠ¹/ç„¡åŠ¹
- é€šçŸ¥è¨­å®šï¼ˆãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—é€šçŸ¥ã€ã‚µã‚¦ãƒ³ãƒ‰ï¼‰

### 4. ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š
- æš—å·åŒ–è¨­å®š
- è‡ªå‹•ãƒ­ãƒƒã‚¯æ©Ÿèƒ½
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¨˜æ†¶è¨­å®š

### 5. ğŸŒ¸ ä¾˜ã³å¯‚ã³è¨­å®š
- ç°¡ç´ æ€§ãƒ¬ãƒ™ãƒ«ï¼ˆ0-100%ï¼‰
- é™å¯‚æ€§ãƒ¬ãƒ™ãƒ«ï¼ˆ0-100%ï¼‰
- ç„¡å¸¸æ€§ãƒ¬ãƒ™ãƒ«ï¼ˆ0-100%ï¼‰
- ç¾å­¦ã®å“²å­¦èª¬æ˜

### 6. ğŸ› ï¸ è©³ç´°è¨­å®š
- ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«è¨­å®š
- ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰
- è¨­å®šã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
- è¨­å®šãƒ•ã‚©ãƒ«ãƒ€ã‚’é–‹ã
- è¨­å®šãƒªã‚»ãƒƒãƒˆ

---

## ğŸŒ¸ ä¾˜ã³å¯‚ã³ç¾å­¦ã®å®Ÿç¾

### è¦–è¦šçš„èª¿å’Œ
- **ç´”ç™½ã®èƒŒæ™¯**: å¿ƒã‚’è½ã¡ç€ã‹ã›ã‚‹æ¸…æ½”ãªç’°å¢ƒ
- **å¢¨è‰²ã®æ–‡å­—**: èª­ã¿ã‚„ã™ãç¾ã—ã„æ–‡å­—è‰²
- **ç¹Šç´°ãªå¢ƒç•Œç·š**: æ§ãˆã‚ã§ä¸Šå“ãªåŒºåˆ‡ã‚Š
- **è‡ªç„¶ãªè‰²èª¿**: ç›®ã«å„ªã—ã„å’Œã®è‰²å½©

### æ“ä½œã®é™å¯‚æ€§
- **æ§ãˆã‚ãªãƒœã‚¿ãƒ³**: æ©Ÿèƒ½çš„ã§ã‚ã‚ŠãªãŒã‚‰ç¾ã—ã„
- **è‡ªç„¶ãªé…ç½®**: ç›´æ„Ÿçš„ãªæ“ä½œãƒ•ãƒ­ãƒ¼
- **é™ã‹ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯**: é‚ªé­”ã«ãªã‚‰ãªã„çŠ¶æ…‹è¡¨ç¤º
- **ä½™ç™½ã®ç¾**: é©åˆ‡ãªç©ºé–“ã«ã‚ˆã‚‹è¦–è¦šçš„ä¼‘æ¯

### å¿ƒã‚’è¾¼ã‚ãŸä½“é¨“
- **è¨­å®šã®å®‰ã‚‰ã**: ã‚¹ãƒˆãƒ¬ã‚¹ãƒ•ãƒªãƒ¼ãªè¨­å®šå¤‰æ›´
- **å¤‰æ›´ã®å®‰å¿ƒ**: ç¢ºèªã¨å–ã‚Šæ¶ˆã—æ©Ÿèƒ½
- **ç§»è¡Œã®é…æ…®**: ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½
- **å€‹äººåŒ–ã®ç¾**: å€‹äººã®å¥½ã¿ã«å¿œã˜ãŸã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

---

## ğŸ‰ Task 10 å®Œäº†

**è¨­å®šç”»é¢å®Ÿè£…**ãŒæ­£å¸¸ã«å®Œäº†ã—ã¾ã—ãŸã€‚

### æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
- âœ… **Task 10**: è¨­å®šç”»é¢å®Ÿè£… â†’ **å®Œäº†**
- ğŸ”œ **Task 11**: ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ– - è¨­å®šãƒ»ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±ã®æš—å·åŒ–ä¿å­˜
- ğŸ”œ **Task 12**: çµ±åˆãƒ†ã‚¹ãƒˆ - è¤‡æ•°ã‚µãƒ¼ãƒ“ã‚¹ã§ã®å‹•ä½œç¢ºèª

ä¾˜ã³å¯‚ã³ã®ç¾å­¦ã«åŸºã¥ã„ãŸã€å¿ƒã‚’è¾¼ã‚ãŸè¨­å®šä½“é¨“ã‚’å®Ÿç¾ã§ãã¾ã—ãŸã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯é™ã‹ã§ç¾ã—ã„ç’°å¢ƒã§ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è‡ªåˆ†å¥½ã¿ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

---

**ğŸŒ¸ é™å¯‚ã®ä¸­ã®ç¾ã—ã•ã‚’è¿½æ±‚ã—ã¦**

**WabiMailé–‹ç™ºãƒãƒ¼ãƒ **  
*2025å¹´7æœˆ1æ—¥*